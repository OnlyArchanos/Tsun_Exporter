<!doctype html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Tsun Exporter</title>
  <link href="https://fonts.googleapis.com/css2?family=Inter:wght@300;400;500;600;700;800&display=swap" rel="stylesheet">
  <style>
    *, *::before, *::after { box-sizing: border-box; margin: 0; padding: 0; }

    :root {
      --accent: #e94560;
      --accent-glow: rgba(233, 69, 96, 0.2);
      --accent-soft: rgba(233, 69, 96, 0.06);
      --bg: #06060c;
      --surface: rgba(255, 255, 255, 0.025);
      --surface-2: rgba(255, 255, 255, 0.04);
      --surface-3: rgba(255, 255, 255, 0.06);
      --border: rgba(255, 255, 255, 0.05);
      --border-hover: rgba(255, 255, 255, 0.1);
      --text: #e8e8f0;
      --text-2: rgba(232, 232, 240, 0.5);
      --text-3: rgba(232, 232, 240, 0.22);
      --green: #34d399;
      --amber: #fbbf24;
      --blue: #60a5fa;
      --r: 12px;
      --rs: 8px;
      --font: 'Inter', system-ui, -apple-system, sans-serif;
      --w: 370px;
      --blur: blur(20px);
      --blur-heavy: blur(40px);
    }

    html { font-family: var(--font); font-size: 13px; background: var(--bg); color: var(--text); width: var(--w); min-height: 500px; max-height: 600px; overflow: hidden; -webkit-font-smoothing: antialiased; }
    body { width: var(--w); min-height: 500px; max-height: 600px; overflow: hidden; display: flex; flex-direction: column; background: var(--bg); }

    /* ── Ambient glow ── */
    .glow { position: fixed; inset: 0; pointer-events: none; z-index: 0; overflow: hidden; }
    .glow-orb { position: absolute; border-radius: 50%; filter: blur(80px); animation: orbFloat 8s ease-in-out infinite; }
    .glow-a { width: 160px; height: 160px; background: var(--accent); opacity: 0.06; top: -40px; right: -20px; animation-delay: 0s; }
    .glow-b { width: 120px; height: 120px; background: #6366f1; opacity: 0.04; bottom: -30px; left: -20px; animation-delay: -4s; }
    .glow-c { width: 80px; height: 80px; background: var(--blue); opacity: 0.03; top: 50%; left: 50%; animation-delay: -2s; }
    @keyframes orbFloat {
      0%, 100% { transform: translate(0, 0) scale(1); }
      33% { transform: translate(10px, -15px) scale(1.1); }
      66% { transform: translate(-8px, 10px) scale(0.95); }
    }

    #app { position: relative; z-index: 1; display: flex; flex-direction: column; height: 100%; min-height: 500px; max-height: 600px; animation: appEntry 0.4s cubic-bezier(0.16, 1, 0.3, 1); }
    @keyframes appEntry { from { opacity: 0; transform: translateY(4px); } }

    /* ── Header ── */
    .hdr {
      padding: 14px 16px 12px;
      display: flex; align-items: center; justify-content: space-between;
      border-bottom: 1px solid var(--border);
      background: var(--surface);
      backdrop-filter: var(--blur-heavy);
      -webkit-backdrop-filter: var(--blur-heavy);
    }
    .logo { display: flex; align-items: center; gap: 9px; }
    .logo-mark {
      width: 26px; height: 26px;
      background: var(--accent);
      border-radius: 7px;
      display: grid; place-items: center;
      box-shadow: 0 0 20px var(--accent-glow), inset 0 1px 0 rgba(255,255,255,0.15);
      animation: logoPulse 3s ease-in-out infinite;
    }
    @keyframes logoPulse {
      0%, 100% { box-shadow: 0 0 20px var(--accent-glow); }
      50% { box-shadow: 0 0 28px var(--accent-glow), 0 0 40px rgba(233,69,96,0.08); }
    }
    .logo-mark svg { width: 13px; height: 13px; color: white; }
    .logo-name { font-size: 14px; font-weight: 700; letter-spacing: -0.4px; }
    .logo-name span { color: var(--accent); }
    .pill {
      font-size: 10px; font-weight: 700;
      padding: 3px 8px; border-radius: 20px;
      background: var(--accent-soft); color: var(--accent);
      border: 1px solid rgba(233,69,96,0.1);
      letter-spacing: 0.3px;
      transition: all 0.3s cubic-bezier(0.16, 1, 0.3, 1);
    }

    /* ── Nav ── */
    .nav {
      display: flex; position: relative;
      border-bottom: 1px solid var(--border);
      background: var(--surface);
      backdrop-filter: var(--blur);
      -webkit-backdrop-filter: var(--blur);
    }
    .nav-slider {
      position: absolute; bottom: 0; height: 2px;
      background: var(--accent);
      border-radius: 2px;
      transition: left 0.3s cubic-bezier(0.16, 1, 0.3, 1), width 0.3s cubic-bezier(0.16, 1, 0.3, 1);
      box-shadow: 0 0 8px var(--accent-glow);
    }
    .nav-tab {
      flex: 1; position: relative;
      padding: 10px 0; font-size: 11px; font-weight: 500;
      color: var(--text-3); background: none; border: none;
      cursor: pointer; font-family: var(--font);
      display: flex; align-items: center; justify-content: center; gap: 5px;
      transition: color 0.25s, transform 0.15s;
      letter-spacing: 0.2px;
    }
    .nav-tab:hover { color: var(--text-2); }
    .nav-tab:active { transform: scale(0.97); }
    .nav-tab.active { color: var(--text); }
    .nav-tab svg { width: 12px; height: 12px; transition: transform 0.25s; }
    .nav-tab.active svg { transform: scale(1.1); }
    .badge {
      font-size: 8px; min-width: 14px; height: 14px;
      background: var(--accent-soft); color: var(--accent);
      border-radius: 20px; padding: 0 4px;
      display: flex; align-items: center; justify-content: center;
      font-weight: 700; letter-spacing: 0.3px;
      transition: transform 0.3s cubic-bezier(0.34, 1.56, 0.64, 1);
    }
    .hidden { display: none !important; }

    /* ── Panels ── */
    .panel {
      display: none; flex: 1; overflow-y: auto;
      padding: 14px 16px; flex-direction: column; gap: 12px;
    }
    .panel.active { display: flex; animation: panelIn 0.35s cubic-bezier(0.16, 1, 0.3, 1); }
    @keyframes panelIn { from { opacity: 0; transform: translateY(6px); } }
    .panel::-webkit-scrollbar { width: 2px; }
    .panel::-webkit-scrollbar-track { background: transparent; }
    .panel::-webkit-scrollbar-thumb { background: rgba(255,255,255,0.05); border-radius: 2px; }

    /* ── Action card ── */
    .action-card {
      display: flex; align-items: center; gap: 12px;
      padding: 14px;
      background: var(--surface-2);
      backdrop-filter: var(--blur);
      -webkit-backdrop-filter: var(--blur);
      border: 1px solid var(--border);
      border-radius: var(--r);
      cursor: pointer;
      transition: all 0.25s cubic-bezier(0.16, 1, 0.3, 1);
      animation: slideUp 0.4s cubic-bezier(0.16, 1, 0.3, 1) both;
    }
    .action-card:hover {
      border-color: rgba(233,69,96,0.2);
      background: rgba(233,69,96,0.04);
      transform: translateY(-1px);
      box-shadow: 0 4px 20px rgba(0,0,0,0.2), 0 0 0 1px rgba(233,69,96,0.06);
    }
    .action-card:active { transform: scale(0.985) translateY(0); }
    @keyframes slideUp {
      from { opacity: 0; transform: translateY(12px); }
      to { opacity: 1; transform: translateY(0); }
    }
    .action-icon {
      width: 34px; height: 34px;
      border-radius: 9px;
      background: var(--accent);
      display: grid; place-items: center; flex-shrink: 0;
      box-shadow: 0 0 16px var(--accent-glow);
      transition: box-shadow 0.25s;
    }
    .action-card:hover .action-icon { box-shadow: 0 0 24px var(--accent-glow); }
    .action-icon svg { width: 16px; height: 16px; color: white; }
    .action-text { flex: 1; min-width: 0; }
    .action-title { font-size: 12.5px; font-weight: 600; letter-spacing: -0.1px; }
    .action-desc { font-size: 10.5px; color: var(--text-2); overflow: hidden; text-overflow: ellipsis; white-space: nowrap; font-weight: 400; }
    .action-arrow { transition: transform 0.25s; }
    .action-card:hover .action-arrow { transform: translateX(2px); }
    .action-arrow svg { width: 12px; height: 12px; color: var(--text-3); }

    .divider {
      display: flex; align-items: center; gap: 10px;
      font-size: 10px; color: var(--text-3);
      letter-spacing: 0.8px; text-transform: uppercase; font-weight: 500;
      animation: slideUp 0.4s cubic-bezier(0.16, 1, 0.3, 1) 0.05s both;
    }
    .divider::before, .divider::after { content: ''; flex: 1; height: 1px; background: var(--border); }

    /* ── Input ── */
    .input-group { animation: slideUp 0.4s cubic-bezier(0.16, 1, 0.3, 1) 0.1s both; }
    .input {
      width: 100%; padding: 9px 11px;
      background: var(--surface);
      backdrop-filter: var(--blur);
      border: 1px solid var(--border);
      border-radius: var(--rs); color: var(--text);
      font-size: 12px; font-family: var(--font); font-weight: 400;
      outline: none; letter-spacing: 0.1px;
      transition: border 0.2s, box-shadow 0.2s, background 0.2s;
    }
    .input:focus {
      border-color: rgba(233,69,96,0.3);
      box-shadow: 0 0 0 3px rgba(233,69,96,0.06);
      background: var(--surface-2);
    }
    .input::placeholder { color: var(--text-3); font-weight: 400; }
    .input-row { display: flex; gap: 6px; }
    .input-row .input { flex: 1; }
    .label {
      font-size: 9px; font-weight: 600;
      text-transform: uppercase; letter-spacing: 1px;
      color: var(--text-3); margin-bottom: 5px;
      display: flex; align-items: center; gap: 5px;
    }
    .label svg { width: 10px; height: 10px; }

    /* ── Buttons ── */
    .btn {
      display: flex; align-items: center; justify-content: center; gap: 6px;
      padding: 9px 14px; border-radius: var(--rs);
      font-family: var(--font); font-size: 11.5px; font-weight: 500;
      border: none; cursor: pointer;
      transition: all 0.2s cubic-bezier(0.16, 1, 0.3, 1);
      position: relative; overflow: hidden;
      letter-spacing: 0.1px;
    }
    .btn::after {
      content: ''; position: absolute; inset: 0;
      background: rgba(255,255,255,0.1);
      opacity: 0; transition: opacity 0.2s;
    }
    .btn:active::after { opacity: 1; }
    .btn:active { transform: scale(0.96); }
    .btn:disabled { opacity: 0.3; cursor: not-allowed; transform: none; }
    .btn:disabled::after { display: none; }
    .btn svg { width: 13px; height: 13px; flex-shrink: 0; }
    .btn-full { width: 100%; }
    .btn-sm { padding: 7px 10px; font-size: 11px; }
    .btn-primary {
      background: var(--accent); color: white;
      box-shadow: 0 0 16px var(--accent-glow);
    }
    .btn-primary:hover:not(:disabled) {
      box-shadow: 0 0 24px var(--accent-glow);
      transform: translateY(-1px);
    }
    .btn-ghost { background: transparent; color: var(--text-3); }
    .btn-ghost:hover { color: var(--text-2); background: var(--surface); }
    .btn-outline {
      background: var(--surface-2); color: var(--text-2);
      border: 1px solid var(--border);
      backdrop-filter: var(--blur);
    }
    .btn-outline:hover:not(:disabled) {
      background: var(--surface-3); color: var(--text);
      border-color: var(--border-hover);
      transform: translateY(-1px);
    }

    /* ── Activity feed ── */
    .feed { display: none; flex-direction: column; gap: 3px; max-height: 130px; overflow-y: auto; }
    .feed.show { display: flex; animation: panelIn 0.2s ease; }
    .feed::-webkit-scrollbar { width: 2px; }
    .feed::-webkit-scrollbar-thumb { background: rgba(255,255,255,0.04); border-radius: 2px; }
    .feed-item {
      display: flex; align-items: center; gap: 7px;
      padding: 5px 9px;
      background: var(--surface);
      border: 1px solid var(--border);
      border-radius: 6px;
      font-size: 10px; color: var(--text-2);
      animation: feedSlide 0.2s cubic-bezier(0.16, 1, 0.3, 1);
      white-space: nowrap; overflow: hidden; text-overflow: ellipsis;
      backdrop-filter: var(--blur);
    }
    @keyframes feedSlide { from { opacity: 0; transform: translateX(-6px); } }
    .feed-dot { width: 4px; height: 4px; border-radius: 50%; flex-shrink: 0; }
    .feed-dot.green { background: var(--green); box-shadow: 0 0 6px rgba(52,211,153,0.3); }
    .feed-dot.amber { background: var(--amber); box-shadow: 0 0 6px rgba(251,191,36,0.3); }
    .feed-dot.red { background: var(--accent); box-shadow: 0 0 6px var(--accent-glow); }
    .feed-dot.blue { background: var(--blue); box-shadow: 0 0 6px rgba(96,165,250,0.3); }

    /* ── Progress ── */
    .progress { display: none; flex-direction: column; gap: 5px; }
    .progress.show { display: flex; animation: panelIn 0.25s ease; }
    .progress-row { display: flex; justify-content: space-between; font-size: 10.5px; }
    .progress-label { color: var(--text-2); font-weight: 400; }
    .progress-pct { font-weight: 600; color: var(--accent); font-variant-numeric: tabular-nums; }
    .progress-bar { height: 3px; background: var(--surface-2); border-radius: 3px; overflow: hidden; }
    .progress-fill {
      height: 100%; background: var(--accent);
      border-radius: 3px;
      transition: width 0.3s cubic-bezier(0.16, 1, 0.3, 1);
      position: relative;
    }
    .progress-fill::after {
      content: ''; position: absolute; right: 0; top: 0;
      width: 40px; height: 100%;
      background: linear-gradient(90deg, transparent, rgba(255,255,255,0.25));
      animation: shimmer 1.5s ease-in-out infinite;
    }
    @keyframes shimmer { 0%, 100% { opacity: 0; } 50% { opacity: 1; } }

    /* ── List items ── */
    .manga-list { display: flex; flex-direction: column; gap: 3px; }
    .manga-item {
      display: flex; align-items: center; gap: 10px;
      padding: 8px 10px;
      background: var(--surface);
      backdrop-filter: var(--blur);
      -webkit-backdrop-filter: var(--blur);
      border: 1px solid var(--border);
      border-radius: var(--rs);
      transition: all 0.25s cubic-bezier(0.16, 1, 0.3, 1);
      animation: listItemIn 0.3s cubic-bezier(0.16, 1, 0.3, 1) both;
    }
    .manga-item:hover {
      background: var(--surface-3);
      border-color: var(--border-hover);
      transform: translateX(3px);
      box-shadow: -2px 0 0 var(--accent), 0 2px 12px rgba(0,0,0,0.15);
    }
    @keyframes listItemIn {
      from { opacity: 0; transform: translateY(8px) scale(0.98); }
      to { opacity: 1; transform: translateY(0) scale(1); }
    }
    .manga-thumb {
      width: 26px; height: 34px; border-radius: 4px;
      object-fit: cover; flex-shrink: 0;
      background: var(--surface-2);
      transition: transform 0.2s;
    }
    .manga-item:hover .manga-thumb { transform: scale(1.05); }
    .manga-thumb-placeholder {
      width: 26px; height: 34px; border-radius: 4px;
      background: var(--surface-2); display: grid; place-items: center;
      flex-shrink: 0; color: var(--text-3);
    }
    .manga-thumb-placeholder svg { width: 12px; height: 12px; }
    .manga-info { flex: 1; min-width: 0; }
    .manga-title {
      font-size: 11.5px; font-weight: 500;
      white-space: nowrap; overflow: hidden; text-overflow: ellipsis;
      line-height: 1.4; letter-spacing: -0.1px;
    }
    .manga-actions { display: flex; gap: 2px; flex-shrink: 0; opacity: 0; transition: opacity 0.2s; }
    .manga-item:hover .manga-actions { opacity: 1; }
    .act-btn {
      width: 24px; height: 24px; border-radius: 6px;
      display: grid; place-items: center;
      cursor: pointer; color: var(--text-3);
      transition: all 0.2s cubic-bezier(0.16, 1, 0.3, 1);
    }
    .act-btn:hover { background: var(--surface-3); color: var(--text-2); transform: scale(1.1); }
    .act-btn:active { transform: scale(0.9); }
    .act-btn.danger:hover { color: var(--accent); background: var(--accent-soft); }
    .act-btn svg { width: 11px; height: 11px; }

    /* ── Empty states ── */
    .empty { text-align: center; padding: 32px 20px; animation: emptyIn 0.5s cubic-bezier(0.16, 1, 0.3, 1); }
    @keyframes emptyIn { from { opacity: 0; transform: scale(0.95) translateY(10px); } }
    .empty-icon {
      width: 48px; height: 48px; margin: 0 auto 10px;
      background: var(--surface-2);
      border: 1px solid var(--border);
      border-radius: 14px;
      display: grid; place-items: center;
      color: var(--text-3);
      animation: emptyFloat 3s ease-in-out infinite;
    }
    @keyframes emptyFloat {
      0%, 100% { transform: translateY(0); }
      50% { transform: translateY(-4px); }
    }
    .empty-icon svg { width: 20px; height: 20px; }
    .empty-title { font-size: 13px; font-weight: 600; letter-spacing: -0.2px; }
    .empty-desc { font-size: 11px; color: var(--text-3); margin-top: 3px; font-weight: 400; line-height: 1.5; }

    /* ── Section header ── */
    .sec-hdr { display: flex; align-items: center; justify-content: space-between; }
    .sec-title {
      font-size: 11.5px; font-weight: 600;
      display: flex; align-items: center; gap: 6px;
      letter-spacing: -0.1px;
    }
    .sec-title svg { width: 12px; height: 12px; color: var(--accent); }
    .cnt-pill {
      font-size: 10px; font-weight: 600;
      padding: 2px 7px; border-radius: 20px;
      background: var(--surface);
      backdrop-filter: var(--blur);
      color: var(--text-3); border: 1px solid var(--border);
      font-variant-numeric: tabular-nums;
    }

    .search-wrap { position: relative; flex: 1; }
    .search-wrap svg {
      position: absolute; left: 10px; top: 50%; transform: translateY(-50%);
      width: 12px; height: 12px; color: var(--text-3); pointer-events: none;
      transition: color 0.2s;
    }
    .search-wrap .input { padding-left: 30px; }
    .search-wrap:focus-within svg { color: var(--accent); }

    /* ── Export cards ── */
    .export-option {
      display: flex; align-items: center; gap: 12px;
      padding: 16px;
      background: var(--surface);
      backdrop-filter: var(--blur);
      -webkit-backdrop-filter: var(--blur);
      border: 1px solid var(--border);
      border-radius: var(--r);
      cursor: pointer;
      transition: all 0.25s cubic-bezier(0.16, 1, 0.3, 1);
      animation: slideUp 0.4s cubic-bezier(0.16, 1, 0.3, 1) both;
    }
    .export-option:nth-child(2) { animation-delay: 0.05s; }
    .export-option:hover {
      border-color: var(--border-hover);
      background: var(--surface-3);
      transform: translateY(-2px);
      box-shadow: 0 6px 24px rgba(0,0,0,0.15);
    }
    .export-option:active { transform: scale(0.985) translateY(0); }
    .export-icon {
      width: 36px; height: 36px; border-radius: 9px;
      display: grid; place-items: center; flex-shrink: 0;
      transition: transform 0.25s;
    }
    .export-option:hover .export-icon { transform: scale(1.08); }
    .export-icon svg { width: 16px; height: 16px; }
    .export-name { font-size: 12.5px; font-weight: 600; letter-spacing: -0.1px; }
    .export-desc { font-size: 10px; color: var(--text-3); font-weight: 400; }

    /* ── Toast ── */
    #toast-container {
      position: fixed; bottom: 14px; left: 50%; transform: translateX(-50%);
      z-index: 999; display: flex; flex-direction: column; gap: 4px;
      pointer-events: none; width: calc(var(--w) - 28px);
    }
    .toast {
      padding: 9px 12px; border-radius: 8px;
      font-size: 11px; font-weight: 500;
      display: flex; align-items: center; gap: 6px;
      box-shadow: 0 8px 24px rgba(0,0,0,0.4);
      backdrop-filter: var(--blur-heavy);
      -webkit-backdrop-filter: var(--blur-heavy);
      animation: toastIn 0.3s cubic-bezier(0.34, 1.56, 0.64, 1);
      letter-spacing: 0.1px;
    }
    @keyframes toastIn { from { opacity: 0; transform: translateY(12px) scale(0.95); } }
    .toast svg { width: 13px; height: 13px; flex-shrink: 0; }
    .toast.success { background: rgba(52,211,153,0.1); border: 1px solid rgba(52,211,153,0.12); color: var(--green); }
    .toast.error { background: rgba(233,69,96,0.1); border: 1px solid rgba(233,69,96,0.12); color: var(--accent); }
    .toast.info { background: rgba(96,165,250,0.1); border: 1px solid rgba(96,165,250,0.12); color: var(--blue); }
    .toast.out { animation: toastOut 0.25s ease forwards; }
    @keyframes toastOut { to { opacity: 0; transform: translateY(8px) scale(0.95); } }

    /* ── Modal ── */
    .modal-bg {
      display: none; position: fixed; inset: 0;
      background: rgba(0,0,0,0.6);
      backdrop-filter: blur(6px); -webkit-backdrop-filter: blur(6px);
      z-index: 100; align-items: center; justify-content: center;
    }
    .modal-bg.show { display: flex; animation: modalBgIn 0.2s ease; }
    @keyframes modalBgIn { from { opacity: 0; } }
    .modal {
      background: rgba(14, 14, 30, 0.95);
      backdrop-filter: var(--blur-heavy);
      -webkit-backdrop-filter: var(--blur-heavy);
      border: 1px solid var(--border);
      border-radius: 14px; padding: 18px;
      width: 86%; display: flex; flex-direction: column; gap: 12px;
      box-shadow: 0 20px 60px rgba(0,0,0,0.5);
      animation: modalIn 0.3s cubic-bezier(0.34, 1.56, 0.64, 1);
    }
    @keyframes modalIn { from { transform: scale(0.92) translateY(8px); opacity: 0; } }
    .modal-title { font-size: 14px; font-weight: 700; letter-spacing: -0.3px; }
    .modal-body { font-size: 12px; color: var(--text-2); line-height: 1.6; font-weight: 400; }
    .modal-actions { display: flex; gap: 6px; justify-content: flex-end; }

    .spinner {
      width: 14px; height: 14px;
      border: 2px solid rgba(255,255,255,0.15);
      border-top-color: white; border-radius: 50%;
      animation: spin 0.6s linear infinite;
    }
    @keyframes spin { to { transform: rotate(360deg); } }
  </style>
</head>
<body>
  <div class="glow">
    <div class="glow-orb glow-a"></div>
    <div class="glow-orb glow-b"></div>
    <div class="glow-orb glow-c"></div>
  </div>

  <div id="app">
    <header class="hdr">
      <div class="logo">
        <div class="logo-mark"><svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2.2"><path d="M4 19.5A2.5 2.5 0 0 1 6.5 17H20"/><path d="M6.5 2H20v20H6.5A2.5 2.5 0 0 1 4 19.5v-15A2.5 2.5 0 0 1 6.5 2z"/></svg></div>
        <div class="logo-name"><span>Tsun</span> Exporter</div>
      </div>
      <span class="pill" id="manga-count-badge">0</span>
    </header>

    <nav class="nav">
      <div class="nav-slider" id="nav-slider" style="left:0;width:33.33%"></div>
      <button class="nav-tab active" data-tab="extract">
        <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"><path d="M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4"/><polyline points="7 10 12 15 17 10"/><line x1="12" y1="15" x2="12" y2="3"/></svg>
        Extract
      </button>
      <button class="nav-tab" data-tab="list">
        <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"><line x1="8" y1="6" x2="21" y2="6"/><line x1="8" y1="12" x2="21" y2="12"/><line x1="8" y1="18" x2="21" y2="18"/><line x1="3" y1="6" x2="3.01" y2="6"/><line x1="3" y1="12" x2="3.01" y2="12"/><line x1="3" y1="18" x2="3.01" y2="18"/></svg>
        My List
        <span class="badge hidden" id="list-badge">0</span>
      </button>
      <button class="nav-tab" data-tab="export">
        <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"><path d="M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4"/><polyline points="17 8 12 3 7 8"/><line x1="12" y1="3" x2="12" y2="15"/></svg>
        Export
      </button>
    </nav>

    <!-- EXTRACT -->
    <div class="panel active" id="panel-extract">
      <div class="action-card" id="btn-extract-tab">
        <div class="action-icon"><svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"><circle cx="12" cy="12" r="10"/><path d="M12 8v4l3 3"/></svg></div>
        <div class="action-text">
          <div class="action-title">Export from Current Tab</div>
          <div class="action-desc" id="current-tab-url">Navigate to WeebCentral</div>
        </div>
        <div class="action-arrow"><svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"><polyline points="9 18 15 12 9 6"/></svg></div>
      </div>

      <div class="divider">or enter URL</div>

      <div class="input-group">
        <div class="label"><svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"><path d="M10 13a5 5 0 0 0 7.54.54l3-3a5 5 0 0 0-7.07-7.07l-1.72 1.71"/><path d="M14 11a5 5 0 0 0-7.54-.54l-3 3a5 5 0 0 0 7.07 7.07l1.71-1.71"/></svg> Profile URL</div>
        <div class="input-row">
          <input class="input" type="url" id="profile-url" placeholder="weebcentral.com/users/…/profiles">
          <button class="btn btn-primary" id="btn-extract-url"><svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2.2"><polyline points="7 10 12 15 17 10"/><line x1="12" y1="15" x2="12" y2="3"/></svg> Export</button>
        </div>
      </div>

      <div class="progress" id="extract-progress">
        <div class="progress-row"><span class="progress-label" id="extract-progress-label">Working...</span><span class="progress-pct" id="extract-progress-pct">0%</span></div>
        <div class="progress-bar"><div class="progress-fill" id="extract-progress-fill" style="width:0%"></div></div>
      </div>

      <div id="activity-feed" class="feed"></div>

      <div id="post-extract-actions" style="display:none;gap:8px;flex-direction:column">
        <button class="btn btn-outline btn-full" id="btn-go-list">
          <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"><line x1="8" y1="6" x2="21" y2="6"/><line x1="8" y1="12" x2="21" y2="12"/><line x1="8" y1="18" x2="21" y2="18"/><line x1="3" y1="6" x2="3.01" y2="6"/><line x1="3" y1="12" x2="3.01" y2="12"/><line x1="3" y1="18" x2="3.01" y2="18"/></svg>
          View My List
        </button>
      </div>
    </div>

    <!-- LIST -->
    <div class="panel" id="panel-list">
      <div style="display:flex;gap:6px">
        <div class="search-wrap" style="flex:1">
          <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"><circle cx="11" cy="11" r="8"/><path d="m21 21-4.35-4.35"/></svg>
          <input class="input" type="text" id="list-search" placeholder="Search titles...">
        </div>
      </div>
      <div class="sec-hdr">
        <div class="sec-title"><svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"><path d="M4 19.5A2.5 2.5 0 0 1 6.5 17H20"/><path d="M6.5 2H20v20H6.5A2.5 2.5 0 0 1 4 19.5v-15A2.5 2.5 0 0 1 6.5 2z"/></svg> Library</div>
        <span class="cnt-pill" id="list-count">0</span>
      </div>
      <div class="manga-list" id="manga-list"></div>
    </div>

    <!-- EXPORT -->
    <div class="panel" id="panel-export">
      <div class="sec-title" style="margin-bottom:2px"><svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"><path d="M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4"/><polyline points="17 8 12 3 7 8"/><line x1="12" y1="3" x2="12" y2="15"/></svg> Export Options</div>

      <div class="export-option" data-format="mangaupdates">
        <div class="export-icon" style="background:var(--accent-soft);color:var(--accent)"><svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"><path d="M10 13a5 5 0 0 0 7.54.54l3-3a5 5 0 0 0-7.07-7.07l-1.72 1.71"/><path d="M14 11a5 5 0 0 0-7.54-.54l-3 3a5 5 0 0 0 7.07 7.07l1.71-1.71"/></svg></div>
        <div><div class="export-name">MangaUpdates Links</div><div class="export-desc">Download .txt with MU profile links</div></div>
      </div>
      <div class="export-option" data-format="clipboard">
        <div class="export-icon" style="background:rgba(96,165,250,0.06);color:var(--blue)"><svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"><rect x="9" y="9" width="13" height="13" rx="2" ry="2"/><path d="M5 15H4a2 2 0 0 1-2-2V4a2 2 0 0 1 2-2h9a2 2 0 0 1 2 2v1"/></svg></div>
        <div><div class="export-name">Plain Text</div><div class="export-desc">Copy all titles to clipboard</div></div>
      </div>

      <button class="btn btn-ghost btn-full btn-sm" id="btn-clear-all" style="margin-top:auto">
        <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"><polyline points="3 6 5 6 21 6"/><path d="M19 6v14a2 2 0 0 1-2 2H7a2 2 0 0 1-2-2V6m3 0V4a2 2 0 0 1 2-2h4a2 2 0 0 1 2 2v2"/></svg>
        Reset All Data
      </button>
    </div>
  </div>

  <div id="toast-container"></div>
  <div class="modal-bg" id="modal-backdrop">
    <div class="modal" id="modal">
      <div class="modal-title" id="modal-title">Confirm</div>
      <div class="modal-body" id="modal-body">Are you sure?</div>
      <div class="modal-actions">
        <button class="btn btn-ghost btn-sm" id="modal-cancel">Cancel</button>
        <button class="btn btn-primary btn-sm" id="modal-confirm">Confirm</button>
      </div>
    </div>
  </div>

  <script src="popup.js"></script>
</body>
</html>
